!function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="./dist/",t(0)}([function(e,t,r){e.exports=r(20)},function(e,t){e.exports=require("three")},function(e,t){e.exports=require("rx")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("glView-helpers")},function(e,t,r){"use strict";function n(e,t,n,i){function o(e,t,n){for(var o=r(29).PNG,s=new o({width:t,height:n}),u=0;n>u;++u)for(var l=0;t>l;++l){var c=u*t+l,f=e[4*c],d=e[4*c+1],h=e[4*c+2],p=e[4*c+3],v=(n-u+1)*t+l;s.data[4*v]=f,s.data[4*v+1]=d,s.data[4*v+2]=h,s.data[4*v+3]=p}s.pack().pipe(a.createWriteStream(i))}o(e,t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n;var a=r(3)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=r(1),i=n(a),o=function(e,t,r,n,a,o,s){function u(e,t){c[e]=function(){c.orientationGenerator(t)}}i["default"].Camera.call(this),this.fov=r,this.left=-e/2,this.right=e/2,this.top=t/2,this.bottom=-t/2,this.cameraO=new i["default"].OrthographicCamera(e/-2,e/2,t/2,t/-2,o,s),this.cameraP=new i["default"].PerspectiveCamera(r,e/t,n,a),this.zoom=1,this.toPerspective();this.target=new i["default"].Vector3,this.defaultPosition=new i["default"].Vector3,this.orientationMap={F:new i["default"].Vector3(1,0,0),B:new i["default"].Vector3(-1,0,0),A:new i["default"].Vector3(0,0,1),U:new i["default"].Vector3(0,0,-1),L:new i["default"].Vector3(0,1,0),R:new i["default"].Vector3(0,-1,0)};var l={F:"Front",B:"Back",L:"Left",R:"Right",A:"Top",U:"Bottom",FL:"FrontLeft",FR:"FrontRight",FA:"FrontTop",FU:"FrontBottom",BL:"BackLeft",BR:"BackRight",BA:"BackTop",BU:"BackBottom",LA:"LeftTop",LU:"LeftBottom",RA:"RightTop",RU:"RightBottom",FAL:"FrontTopLeft",FAR:"FrontTopRight",FUL:"FrontBottomLeft",FUR:"FrontBottomRight",BAL:"BackTopLeft",BAR:"BackTopRight",BUL:"BackBottomLeft",BUR:"BackBottomRight"},c=this;for(var f in l){var d=l[f],h="to"+d.charAt(0).toUpperCase()+d.slice(1)+"View";u(h,f)}};o.prototype=Object.create(i["default"].Camera.prototype),o.prototype.lookAt=function(){var e=new i["default"].Matrix4;return function(t){this.target=t,this.inOrthographicMode===!0&&this.toOrthographic(),e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),o.prototype.toPerspective=function(){this.near=this.cameraP.near,this.far=this.cameraP.far,this.cameraP.fov=this.fov/this.zoom,this.cameraP.updateProjectionMatrix(),this.projectionMatrix=this.cameraP.projectionMatrix,this.inPerspectiveMode=!0,this.inOrthographicMode=!1},o.prototype.toOrthographic=function(){var e=this.fov,t=this.cameraP.aspect;this.cameraP.near,this.cameraP.far;null===this.target&&(this.target=new i["default"].Vector3);var r=.3*(new i["default"].Vector3).subVectors(this.position,this.target).length(),n=Math.tan(e)*r*t,a=Math.tan(e)*r,o=n,s=a;this.cameraO.left=o,this.cameraO.right=-o,this.cameraO.top=-s,this.cameraO.bottom=s,this.cameraO.updateProjectionMatrix(),this.near=this.cameraO.near,this.far=this.cameraO.far,this.projectionMatrix=this.cameraO.projectionMatrix,this.inPerspectiveMode=!1,this.inOrthographicMode=!0},o.prototype.setSize=function(e,t){this.cameraP.aspect=e/t,this.left=-e/2,this.right=e/2,this.top=t/2,this.bottom=-t/2},o.prototype.setFov=function(e){this.fov=e,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},o.prototype.updateProjectionMatrix=function(){this.inPerspectiveMode?this.toPerspective():(this.toPerspective(),this.toOrthographic())},o.prototype.setLens=function(e,t){void 0===t&&(t=24);var r=2*i["default"].Math.radToDeg(Math.atan(t/(2*e)));return this.setFov(r),r},o.prototype.setZoom=function(e){this.zoom=e,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},o.prototype.toDiagonalView=function(){this.position.copy(this.defaultPosition),this.target=new i["default"].Vector3,this.lookAt(this.target)},o.prototype.orientationGenerator=function(e){for(var t=this.position.clone().sub(this.target),r=e,n=new i["default"].Vector3,a=0;a<r.length;a++){var o=r[a],s=this.orientationMap[o].clone();n.add(s)}n.setLength(t.length()),this.position.copy(n),this.lookAt(this.target)},o.prototype.centerView=function(){this.position.copy(this.defaultPosition),this.lookAt(this.target)},o.prototype.resetView=function(){this.position.copy(this.defaultPosition),this.target.copy(new i["default"].Vector3)},e.exports=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),i=n(a),o=function(e,t,r){function n(){return 2*Math.PI/60/60*o.autoRotateSpeed}function a(){return Math.pow(.95,o.userZoomSpeed)}this.objects=[],this.objectOptions=[],this.camStates=[],this.domElement=void 0!==t?t:document,this.upVector=r||new i["default"].Vector3(0,1,0),this.enabled=!0,this.centers=[],this.userZoom=!0,this.userZoomSpeed=1,this.userRotate=!0,this.userRotateSpeed=1,this.userPan=!0,this.userPanSpeed=2,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minDistance=.2,this.maxDistance=600,this.active=!1,this.mainPointerPressed=!1;var o=this,s=1e-6,u=1800,l=0,c=0,f=1,d=l,h=c,p=f;this.addObject=function(e,t){if(-1==this.objects.indexOf(e)){var r={userZoom:!0,userPan:!0,userRotate:!0};t=Object.assign({},r,t),this.objects.push(e),this.objectOptions.push(t),this.centers.push(new i["default"].Vector3),this.camStates.push({phiDelta:0,thetaDelta:0,scale:1,lastPosition:new i["default"].Vector3})}};var v={type:"change"};this.update=function(e){for(var t=0;t<this.objects.length;t++){var r=this.objects[t],a=this.centers[t],i=this.camStates[t],u=i.thetaDelta,l=i.phiDelta,c=i.scale,f=i.lastPosition,d=r.position,h=d.clone().sub(a);if(1==this.upVector.z)var p=Math.atan2(h.x,h.y),m=Math.atan2(Math.sqrt(h.x*h.x+h.y*h.y),h.z);else{var p=Math.atan2(h.x,h.z),m=Math.atan2(Math.sqrt(h.x*h.x+h.z*h.z),h.y);u=-u}this.autoRotate&&this.objects.map(function(e,t){o.objectOptions[t].userRotate&&(o.camStates[t].thetaDelta+=n())}),p+=u,m+=l,m=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,m)),m=Math.max(s,Math.min(Math.PI-s,m));var g=h.length()*c;g=Math.max(this.minDistance,Math.min(this.maxDistance,g)),1==this.upVector.z?(h.x=g*Math.sin(m)*Math.sin(p),h.z=g*Math.cos(m),h.y=g*Math.sin(m)*Math.cos(p)):(h.x=g*Math.sin(m)*Math.sin(p),h.y=g*Math.cos(m),h.z=g*Math.sin(m)*Math.cos(p)),d.copy(a).add(h),r.lookAt(a),f.distanceTo(r.position)>0&&(this.dispatchEvent(v),f.copy(r.position)),i.thetaDelta/=1.5,i.phiDelta/=1.5,i.scale=1}},this.enable=function(){o.enabled=!0,this.enabled=!0},this.disable=function(){o.enabled=!1,this.enabled=!1},this.reset=function(){for(var e=0;e<this.objects.length;e++){var t=this.centers[e];t=new i["default"].Vector3}this.objects.map(function(e,t){var r=this.centers[t];r=new i["default"].Vector3,this.camStates[t].phiDelta=d,this.camStates[t].thetaDelta=h,this.camStates[t].scale=p=f}),this.update()},this.setObservables=function(e){function t(e,t,r){o.enabled!==!1&&o.userZoom!==!1&&r.map(function(r,n){o.objectOptions[n].userZoom&&(0>e&&(o.camStates[n].scale/=t),e>0&&(o.camStates[n].scale*=t))})}function r(e,t){o.enabled!==!1&&o.userRotate!==!1&&e.map(function(e,r){o.objectOptions[r].userRotate&&(o.camStates[r].thetaDelta+=t.x,o.camStates[r].phiDelta+=t.y)})}var n=e.dragMoves$,i=e.zooms$,s=this;n.subscribe(function(e){var t=e.delta,n={x:0,y:0};n.x=2*Math.PI*t.x/u*o.userRotateSpeed,n.y=-2*Math.PI*t.y/u*o.userRotateSpeed,r(s.objects,n)}),i.subscribe(function(e){var r=void 0;r||(r=a()),t(e,r,s.objects)})}};o.prototype=Object.create(i["default"].EventDispatcher.prototype),t["default"]=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),i=n(a);i["default"].RenderableObject=function(){this.id=0,this.object=null,this.z=0},i["default"].RenderableFace=function(){this.id=0,this.v1=new i["default"].RenderableVertex,this.v2=new i["default"].RenderableVertex,this.v3=new i["default"].RenderableVertex,this.normalModel=new i["default"].Vector3,this.vertexNormalsModel=[new i["default"].Vector3,new i["default"].Vector3,new i["default"].Vector3],this.vertexNormalsLength=0,this.color=new i["default"].Color,this.material=null,this.uvs=[new i["default"].Vector2,new i["default"].Vector2,new i["default"].Vector2],this.z=0},i["default"].RenderableVertex=function(){this.position=new i["default"].Vector3,this.positionWorld=new i["default"].Vector3,this.positionScreen=new i["default"].Vector4,this.visible=!0},i["default"].RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},i["default"].RenderableLine=function(){this.id=0,this.v1=new i["default"].RenderableVertex,this.v2=new i["default"].RenderableVertex,this.vertexColors=[new i["default"].Color,new i["default"].Color],this.material=null,this.z=0},i["default"].RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new i["default"].Vector2,this.material=null},i["default"].Projector=function(){function e(){if(l===x){var e=new i["default"].RenderableObject;return b.push(e),x++,l++,e}return b[l++]}function t(){if(f===_){var e=new i["default"].RenderableVertex;return w.push(e),_++,f++,e}return w[f++]}function r(){if(h===j){var e=new i["default"].RenderableFace;return M.push(e),j++,h++,e}return M[h++]}function n(){if(v===O){var e=new i["default"].RenderableLine;return S.push(e),O++,v++,e}return S[v++]}function a(){if(g===F){var e=new i["default"].RenderableSprite;return P.push(e),F++,g++,e}return P[g++]}function o(e,t){return e.z!==t.z?t.z-e.z:e.id!==t.id?e.id-t.id:0}function s(e,t){var r=0,n=1,a=e.z+e.w,i=t.z+t.w,o=-e.z+e.w,s=-t.z+t.w;return a>=0&&i>=0&&o>=0&&s>=0?!0:0>a&&0>i||0>o&&0>s?!1:(0>a?r=Math.max(r,a/(a-i)):0>i&&(n=Math.min(n,a/(a-i))),0>o?r=Math.max(r,o/(o-s)):0>s&&(n=Math.min(n,o/(o-s))),r>n?!1:(e.lerp(t,r),t.lerp(e,1-n),!0))}var u,l,c,f,d,h,p,v,m,g,y,b=[],x=0,w=[],_=0,M=[],j=0,S=[],O=0,P=[],F=0,A={objects:[],lights:[],elements:[]},C=new i["default"].Vector3,V=new i["default"].Vector3,B=new i["default"].Vector3,D=new i["default"].Vector3,E=new i["default"].Vector4,R=new i["default"].Box3(new i["default"].Vector3(-1,-1,-1),new i["default"].Vector3(1,1,1)),k=new i["default"].Box3,T=new Array(3),L=(new Array(4),new i["default"].Matrix4),z=new i["default"].Matrix4,N=new i["default"].Matrix4,I=new i["default"].Matrix3,U=new i["default"].Frustum,G=new i["default"].Vector4,W=new i["default"].Vector4;this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(e,t){console.error("THREE.Projector: .pickingRay() has been removed.")};var q=function(){var e=[],a=[],o=null,s=null,u=new i["default"].Matrix3,l=function(t){o=t,s=o.material,u.getNormalMatrix(o.matrixWorld),e.length=0,a.length=0},f=function(e){var t=e.position,r=e.positionWorld,n=e.positionScreen;r.copy(t).applyMatrix4(y),n.copy(r).applyMatrix4(z);var a=1/n.w;n.x*=a,n.y*=a,n.z*=a,e.visible=n.x>=-1&&n.x<=1&&n.y>=-1&&n.y<=1&&n.z>=-1&&n.z<=1},h=function(e,r,n){c=t(),c.position.set(e,r,n),f(c)},v=function(t,r,n){e.push(t,r,n)},m=function(e,t){a.push(e,t)},g=function(e,t,r){return e.visible===!0||t.visible===!0||r.visible===!0?!0:(T[0]=e.positionScreen,T[1]=t.positionScreen,T[2]=r.positionScreen,R.isIntersectionBox(k.setFromPoints(T)))},b=function(e,t,r){return(r.positionScreen.x-e.positionScreen.x)*(t.positionScreen.y-e.positionScreen.y)-(r.positionScreen.y-e.positionScreen.y)*(t.positionScreen.x-e.positionScreen.x)<0},x=function(e,t){var r=w[e],a=w[t];p=n(),p.id=o.id,p.v1.copy(r),p.v2.copy(a),p.z=(r.positionScreen.z+a.positionScreen.z)/2,p.material=o.material,A.elements.push(p)},_=function(t,n,l){var c=w[t],f=w[n],h=w[l];if(g(c,f,h)!==!1&&(s.side===i["default"].DoubleSide||b(c,f,h)===!0)){d=r(),d.id=o.id,d.v1.copy(c),d.v2.copy(f),d.v3.copy(h),d.z=(c.positionScreen.z+f.positionScreen.z+h.positionScreen.z)/3;for(var p=0;3>p;p++){var v=3*arguments[p],m=d.vertexNormalsModel[p];m.set(e[v],e[v+1],e[v+2]),m.applyMatrix3(u).normalize();var y=2*arguments[p],x=d.uvs[p];x.set(a[y],a[y+1])}d.vertexNormalsLength=3,d.material=o.material,A.elements.push(d)}};return{setObject:l,projectVertex:f,checkTriangleVisibility:g,checkBackfaceCulling:b,pushVertex:h,pushNormal:v,pushUv:m,pushLine:x,pushTriangle:_}},X=new q;this.projectScene=function(c,b,x,_){h=0,v=0,g=0,A.elements.length=0,c.autoUpdate===!0&&c.updateMatrixWorld(),void 0===b.parent&&b.updateMatrixWorld(),L.copy(b.matrixWorldInverse.getInverse(b.matrixWorld)),z.multiplyMatrices(b.projectionMatrix,L),U.setFromMatrix(z),l=0,A.objects.length=0,A.lights.length=0,c.traverseVisible(function(t){if(t instanceof i["default"].Light)A.lights.push(t);else if(t instanceof i["default"].Mesh||t instanceof i["default"].Line||t instanceof i["default"].Sprite){if(t.material.visible===!1)return;(t.frustumCulled===!1||U.intersectsObject(t)===!0)&&(u=e(),u.id=t.id,u.object=t,null!==t.renderDepth?u.z=t.renderDepth:(D.setFromMatrixPosition(t.matrixWorld),D.applyProjection(z),u.z=D.z),A.objects.push(u))}}),x===!0&&A.objects.sort(o);for(var M=0,j=A.objects.length;j>M;M++){var S=A.objects[M].object,O=S.geometry;if(X.setObject(S),y=S.matrixWorld,f=0,S instanceof i["default"].Mesh){if(O instanceof i["default"].BufferGeometry){var P=O.attributes,F=O.offsets;if(void 0===P.position)continue;for(var R=P.position.array,k=0,T=R.length;T>k;k+=3)X.pushVertex(R[k],R[k+1],R[k+2]);if(void 0!==P.normal)for(var q=P.normal.array,k=0,T=q.length;T>k;k+=3)X.pushNormal(q[k],q[k+1],q[k+2]);if(void 0!==P.uv)for(var H=P.uv.array,k=0,T=H.length;T>k;k+=2)X.pushUv(H[k],H[k+1]);if(void 0!==P.index){var J=P.index.array;if(F.length>0)for(var M=0;M<F.length;M++)for(var Z=F[M],Y=Z.index,k=Z.start,T=Z.start+Z.count;T>k;k+=3)X.pushTriangle(J[k]+Y,J[k+1]+Y,J[k+2]+Y);else for(var k=0,T=J.length;T>k;k+=3)X.pushTriangle(J[k],J[k+1],J[k+2])}else for(var k=0,T=R.length/3;T>k;k+=3)X.pushTriangle(k,k+1,k+2)}else if(O instanceof i["default"].Geometry){var K=O.vertices,Q=O.faces,$=O.faceVertexUvs[0];I.getNormalMatrix(y);for(var ee=S.material instanceof i["default"].MeshFaceMaterial,te=ee===!0?S.material:null,re=0,ne=K.length;ne>re;re++){var ae=K[re];X.pushVertex(ae.x,ae.y,ae.z)}for(var ie=0,oe=Q.length;oe>ie;ie++){var se=Q[ie],ue=ee===!0?te.materials[se.materialIndex]:S.material;if(void 0!==ue){var le=ue.side,ce=w[se.a],fe=w[se.b],de=w[se.c];if(ue.morphTargets===!0){var he=O.morphTargets,pe=S.morphTargetInfluences,ve=ce.position,me=fe.position,ge=de.position;C.set(0,0,0),V.set(0,0,0),B.set(0,0,0);for(var ye=0,be=he.length;be>ye;ye++){var xe=pe[ye];if(0!==xe){var we=he[ye].vertices;C.x+=(we[se.a].x-ve.x)*xe,C.y+=(we[se.a].y-ve.y)*xe,C.z+=(we[se.a].z-ve.z)*xe,V.x+=(we[se.b].x-me.x)*xe,V.y+=(we[se.b].y-me.y)*xe,V.z+=(we[se.b].z-me.z)*xe,B.x+=(we[se.c].x-ge.x)*xe,B.y+=(we[se.c].y-ge.y)*xe,B.z+=(we[se.c].z-ge.z)*xe}}ce.position.add(C),fe.position.add(V),de.position.add(B),X.projectVertex(ce),X.projectVertex(fe),X.projectVertex(de)}if(X.checkTriangleVisibility(ce,fe,de)!==!1){var _e=X.checkBackfaceCulling(ce,fe,de);if(le!==i["default"].DoubleSide){if(le===i["default"].FrontSide&&_e===!1)continue;if(le===i["default"].BackSide&&_e===!0)continue}d=r(),d.id=S.id,d.v1.copy(ce),d.v2.copy(fe),d.v3.copy(de),d.normalModel.copy(se.normal),_e!==!1||le!==i["default"].BackSide&&le!==i["default"].DoubleSide||d.normalModel.negate(),d.normalModel.applyMatrix3(I).normalize();for(var Me=se.vertexNormals,je=0,Se=Math.min(Me.length,3);Se>je;je++){var Oe=d.vertexNormalsModel[je];Oe.copy(Me[je]),_e!==!1||le!==i["default"].BackSide&&le!==i["default"].DoubleSide||Oe.negate(),Oe.applyMatrix3(I).normalize()}d.vertexNormalsLength=Me.length;var Pe=$[ie];if(void 0!==Pe)for(var Fe=0;3>Fe;Fe++)d.uvs[Fe].copy(Pe[Fe]);d.color=se.color,d.material=ue,d.z=(ce.positionScreen.z+fe.positionScreen.z+de.positionScreen.z)/3,A.elements.push(d)}}}}}else if(S instanceof i["default"].Line){if(O instanceof i["default"].BufferGeometry){var P=O.attributes;if(void 0!==P.position){for(var R=P.position.array,k=0,T=R.length;T>k;k+=3)X.pushVertex(R[k],R[k+1],R[k+2]);if(void 0!==P.index)for(var J=P.index.array,k=0,T=J.length;T>k;k+=2)X.pushLine(J[k],J[k+1]);else for(var Ae=S.mode===i["default"].LinePieces?2:1,k=0,T=R.length/3-1;T>k;k+=Ae)X.pushLine(k,k+1)}}else if(O instanceof i["default"].Geometry){N.multiplyMatrices(z,y);var K=S.geometry.vertices;if(0===K.length)continue;ce=t(),ce.positionScreen.copy(K[0]).applyMatrix4(N);for(var Ae=S.mode===i["default"].LinePieces?2:1,re=1,ne=K.length;ne>re;re++)ce=t(),ce.positionScreen.copy(K[re]).applyMatrix4(N),(re+1)%Ae>0||(fe=w[f-2],G.copy(ce.positionScreen),W.copy(fe.positionScreen),s(G,W)===!0&&(G.multiplyScalar(1/G.w),W.multiplyScalar(1/W.w),p=n(),p.id=S.id,p.v1.positionScreen.copy(G),p.v2.positionScreen.copy(W),p.z=Math.max(G.z,W.z),p.material=S.material,S.material.vertexColors===i["default"].VertexColors&&(p.vertexColors[0].copy(S.geometry.colors[re]),p.vertexColors[1].copy(S.geometry.colors[re-1])),A.elements.push(p)))}}else if(S instanceof i["default"].Sprite){E.set(y.elements[12],y.elements[13],y.elements[14],1),E.applyMatrix4(z);var Ce=1/E.w;E.z*=Ce,E.z>=-1&&E.z<=1&&(m=a(),m.id=S.id,m.x=E.x*Ce,m.y=E.y*Ce,m.z=E.z,m.object=S,m.rotation=S.rotation,m.scale.x=S.scale.x*Math.abs(m.x-(E.x+b.projectionMatrix.elements[0])/(E.w+b.projectionMatrix.elements[12])),m.scale.y=S.scale.y*Math.abs(m.y-(E.y+b.projectionMatrix.elements[5])/(E.w+b.projectionMatrix.elements[13])),m.material=S.material,A.elements.push(m))}}return _===!0&&A.elements.sort(o),A}},t["default"]=i["default"].Projector},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return e.selectTrickleUp===!1&&e.selectable===!0}function o(e,t){if(e){if(t(e))return e;if(e.parent)return o(e.parent,t)}}function s(e){return o(e,i)}function u(e){var t=e.pos,r=e.rect,n=e.width,a=e.height,i=(t.x-r.left)/n*2-1,o=2*-((t.y-r.top)/a)+1;return{x:i,y:o}}function l(e,t,r){var n=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],a=(arguments.length<=4||void 0===arguments[4]?10:arguments[4],e.x),i=e.y,o=new d["default"].Vector3(a,i,.5),s=o,u=[];if(n){d["default"].Vector3.prototype.pickingRay=function(e){var t=Math.tan(.5*d["default"].Math.degToRad(e.fov))/e.zoom;return this.x*=t*e.aspect,this.y*=t,this.z=-1,this.transformDirection(e.matrixWorld)};var l=new d["default"].Raycaster;s.pickingRay(t),l.set(t.position,s),u=l.intersectObjects(r,!0)}else{s.unproject(t);var l=(s.clone(),new d["default"].Raycaster(t.position,s.sub(t.position).normalize()));u=l.intersectObjects(r,!0)}return u=u.filter(function(e){return e.object&&e.object.visible===!0}).sort(function(e,t){return e.distance-t.distance})}var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.findSelectionRoot=s,t.getCoordsFromPosSizeRect=u,t.pick=l;var f=r(1),d=n(f),h=r(8),p=(n(h),function(){function e(){a(this,e),this.projector=new d["default"].Projector,this.camera=void 0,this.isOrtho=!1}return c(e,[{key:"pickAlt",value:function(e,t,r,n,a){var i=(e.x-t.left)/r*2-1,o=2*-((e.y-t.top)/n)+1;return this.hiearchyRoot=a.children,this._pickInner(i,o,null,this.camera)}},{key:"_pickInner",value:function(e,t,r,n){r=r||this.isOrtho,n=n||this.camera;var a=new d["default"].Vector3(e,t,.5),i=[],o=a;if(r){d["default"].Vector3.prototype.pickingRay=function(e){var t=Math.tan(.5*d["default"].Math.degToRad(e.fov))/e.zoom;return this.x*=t*e.aspect,this.y*=t,this.z=-1,this.transformDirection(e.matrixWorld)};var s=new d["default"].Raycaster;o.pickingRay(this.camera),s.set(this.camera.position,o),i=s.intersectObjects(this.hiearchyRoot,!0)}else{o.unproject(n);var s=(o.clone(),o.clone(),new d["default"].Raycaster(n.position,o.sub(n.position).normalize()));i=s.intersectObjects(this.hiearchyRoot,!0)}return i=i.sort().filter(function(e,t){return e.object&&e.object.visible===!0&&!t||e!=i[t-1]})}}]),e}());t["default"]=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),i=n(a),o={uniforms:{tDiffuse1:{type:"t",value:null},tDiffuse2:{type:"t",value:null},tDiffuse3:{type:"t",value:null},normalThreshold:{type:"f",value:.1},depthThreshold:{type:"f",value:.05},strengh:{type:"f",value:.4},color:{type:"c",value:new i["default"].Color(2)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse1;","uniform sampler2D tDiffuse2;","uniform sampler2D tDiffuse3;","uniform float normalThreshold;","uniform float depthThreshold;","uniform float strengh;","uniform vec3 color;","varying vec2 vUv;","void main() {","vec4 colorTexel = texture2D( tDiffuse1, vUv );","vec4 normalTexel = texture2D( tDiffuse2, vUv );","vec4 depthTexel = texture2D( tDiffuse3, vUv );","gl_FragColor = colorTexel;","if( normalTexel.r >= normalThreshold || depthTexel.r >=depthThreshold) {","gl_FragColor= colorTexel*(1.0-strengh) + vec4(color[0], color[1], color[2],1);","}","}"].join("\n")};t["default"]=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),i=n(a);i["default"].CopyShader={uniforms:{tDiffuse:{type:"t",value:null},opacity:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")},t["default"]=i["default"].CopyShader},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),i=n(a),o={uniforms:{tDiffuse:{type:"t",value:null},aspect:{type:"v2",value:new i["default"].Vector2(512,512)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","uniform vec2 aspect;","vec2 texel = vec2(1.0 / aspect.x, 1.0 / aspect.y);","mat3 G[2];","const mat3 g0 = mat3( 1.0, 2.0, 1.0, 0.0, 0.0, 0.0, -1.0, -2.0, -1.0 );","const mat3 g1 = mat3( 1.0, 0.0, -1.0, 2.0, 0.0, -2.0, 1.0, 0.0, -1.0 );","void main(void)","{","mat3 I;","float cnv[2];","vec3 sample;","G[0] = g0;","G[1] = g1;","for (float i=0.0; i<3.0; i++)","for (float j=0.0; j<3.0; j++) {","sample = texture2D( tDiffuse, vUv + texel * vec2(i-1.0,j-1.0) ).rgb;","I[int(i)][int(j)] = length(sample);","}","for (int i=0; i<2; i++) {","float dp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);","cnv[i] = dp3 * dp3; ","}","gl_FragColor = vec4(0.5 * sqrt(cnv[0]*cnv[0]+cnv[1]*cnv[1]));","} "].join("\n")};t["default"]=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),i=n(a);i["default"].EffectComposer=function(e,t){if(this.renderer=e,void 0===t){var r=e.getPixelRatio(),n=Math.floor(e.context.canvas.width/r)||1,a=Math.floor(e.context.canvas.height/r)||1,o={minFilter:i["default"].LinearFilter,magFilter:i["default"].LinearFilter,format:i["default"].RGBFormat,stencilBuffer:!1};t=new i["default"].WebGLRenderTarget(n,a,o)}this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===i["default"].CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),this.copyPass=new i["default"].ShaderPass(i["default"].CopyShader)},i["default"].EffectComposer.prototype={swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2;var t,r,n=!1,a=this.passes.length;for(r=0;a>r;r++)if(t=this.passes[r],t.enabled){if(t.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),t.needsSwap){if(n){var o=this.renderer.context;o.stencilFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),o.stencilFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}t instanceof i["default"].MaskPass?n=!0:t instanceof i["default"].ClearMaskPass&&(n=!1)}},reset:function(e){if(void 0===e){e=this.renderTarget1.clone();var t=this.renderer.getPixelRatio();e.width=Math.floor(this.renderer.context.canvas.width/t),e.height=Math.floor(this.renderer.context.canvas.height/t)}this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){var r=this.renderTarget1.clone();r.width=e,r.height=t,this.reset(r)}},t["default"]=i["default"].EffectComposer},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),i=n(a);i["default"].FXAAShader={uniforms:{tDiffuse:{type:"t",value:null},resolution:{type:"v2",value:new i["default"].Vector2(1/1024,1/512)}},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","#define FXAA_REDUCE_MIN   (1.0/128.0)","#define FXAA_REDUCE_MUL   (1.0/8.0)","#define FXAA_SPAN_MAX     8.0","void main() {","vec3 rgbNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ).xyz;","vec3 rgbSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ).xyz;","vec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );","vec3 rgbM  = rgbaM.xyz;","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float lumaNW = dot( rgbNW, luma );","float lumaNE = dot( rgbNE, luma );","float lumaSW = dot( rgbSW, luma );","float lumaSE = dot( rgbSE, luma );","float lumaM  = dot( rgbM,  luma );","float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );","float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );","vec2 dir;","dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );","float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );","dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),","max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),","dir * rcpDirMin)) * resolution;","vec4 rgbA = (1.0/2.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (1.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (2.0/3.0 - 0.5)));","vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (0.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (3.0/3.0 - 0.5)));","float lumaB = dot(rgbB, vec4(luma, 0.0));","if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {","gl_FragColor = rgbA;","} else {","gl_FragColor = rgbB;","}","}"].join("\n")},t["default"]=i["default"].FXAAShader},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ClearMaskPass=t.MaskPass=void 0;var a=r(1),i=n(a);i["default"].MaskPass=function(e,t){this.scene=e,this.camera=t,this.enabled=!0,this.clear=!0,this.needsSwap=!1,this.inverse=!1},i["default"].MaskPass.prototype={render:function(e,t,r,n){var a=e.context;a.colorMask(!1,!1,!1,!1),a.depthMask(!1);var i,o;this.inverse?(i=0,o=1):(i=1,o=0),a.enable(a.STENCIL_TEST),a.stencilOp(a.REPLACE,a.REPLACE,a.REPLACE),a.stencilFunc(a.ALWAYS,i,4294967295),a.clearStencil(o),e.render(this.scene,this.camera,r,this.clear),e.render(this.scene,this.camera,t,this.clear),a.colorMask(!0,!0,!0,!0),a.depthMask(!0),a.stencilFunc(a.EQUAL,1,4294967295),a.stencilOp(a.KEEP,a.KEEP,a.KEEP)}},i["default"].ClearMaskPass=function(){this.enabled=!0},i["default"].ClearMaskPass.prototype={render:function(e,t,r,n){var a=e.context;a.disable(a.STENCIL_TEST)}};var o=i["default"].MaskPass,s=i["default"].ClearMaskPass;t.MaskPass=o,t.ClearMaskPass=s},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),i=n(a);i["default"].RenderPass=function(e,t,r,n,a){this.scene=e,this.camera=t,this.overrideMaterial=r,this.clearColor=n,this.clearAlpha=void 0!==a?a:1,this.oldClearColor=new i["default"].Color,this.oldClearAlpha=1,this.enabled=!0,this.clear=!0,this.needsSwap=!1},i["default"].RenderPass.prototype={render:function(e,t,r,n){this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),e.render(this.scene,this.camera,r,this.clear),this.clearColor&&e.setClearColor(this.oldClearColor,this.oldClearAlpha),this.scene.overrideMaterial=null}},t["default"]=i["default"].RenderPass},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),i=n(a);i["default"].ShaderPass=function(e,t){this.textureID=void 0!==t?t:"tDiffuse",this.uniforms=i["default"].UniformsUtils.clone(e.uniforms),this.material=new i["default"].ShaderMaterial({defines:e.defines||{},uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.renderToScreen=!1,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.camera=new i["default"].OrthographicCamera(-1,1,1,-1,0,1),this.scene=new i["default"].Scene,this.quad=new i["default"].Mesh(new i["default"].PlaneBufferGeometry(2,2),null),this.scene.add(this.quad)},i["default"].ShaderPass.prototype={render:function(e,t,r,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}},t["default"]=i["default"].ShaderPass},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),i=n(a);i["default"].VignetteShader={uniforms:{tDiffuse:{type:"t",value:null},offset:{type:"f",value:1},darkness:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float offset;","uniform float darkness;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( offset );","gl_FragColor = vec4( mix( texel.rgb, vec3( 1.0 - darkness ), dot( uv, uv ) ), texel.a );","}"].join("\n")},t["default"]=i["default"].VignetteShader},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.presets={renderer:{shadowMapEnabled:!0,shadowMapAutoUpdate:!0,shadowMapSoft:!0,shadowMapType:void 0,autoUpdateScene:!0,physicallyBasedShading:!1,
autoClear:!0,gammaInput:!1,gammaOutput:!1},cameras:[{name:"mainCamera",pos:[75,75,145],up:[0,0,1],lens:{fov:45,near:.1,far:2e4}}],controls:[{up:[0,0,1],rotateSpeed:2,panSpeed:2,zoomSpeed:2,autoRotate:{enabled:!1,speed:.2},_enabled:!0,_active:!0}],scenes:{main:[{type:"hemisphereLight",color:"#FFEEEE",gndColor:"#FFFFEE",pos:[0,1200,1500],intensity:.8},{type:"ambientLight",color:"#0x252525",intensity:.03},{type:"directionalLight",color:"#262525",intensity:.2,pos:[150,150,1500],castShadow:!0,onlyShadow:!0}],helpers:[{type:"LabeledGrid"}]}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e;return t=(0,p.geometryFromBuffers)(t),t=(0,p.postProcessMesh)(t),t=y(t)}function i(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;++n)r[n]=e[n];return t}var o=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(u){a=!0,i=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=r(22),u=n(s),l=r(2),c=n(l),f=r(3),d=n(f),h=r(24),p=r(23),v=r(4);global.Rx=c["default"];var m=r(27),g=r(26),y=v.meshTools.centerMesh,b=process.argv.slice(2);b.length>0&&!function(){var e=b[0],t=b[1].split("x").map(function(e){return parseInt(e)}),r=o(t,2),n=r[0],s=r[1],l=(0,h.getNameAndExtension)(e),c=(l.name,l.ext),f={width:n,height:s},p=e+".png";console.log("Running renderer with params",e,f,p);var v={};v.stl=m["default"],v.obj=g["default"];var y=i(d["default"].readFileSync(e)),x=v[c],w={},_=x(y,w);_.filter(function(e){return void 0===e.progress}).map(a).forEach(function(e){(0,u["default"])({mesh:e,uri:p,resolution:f})})}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){return{position:{x:e.x,y:e.y},event:e}}function i(e){return e.target.object}function o(e){return["translate","rotate","scale",null,void 0].indexOf(e)>-1}function s(e,t,r,n){var a=(0,x.pick)(t,r,n),i={};return i.clientX=e.clientX,i.clientY=e.clientY,i.offsetX=e.offsetX,i.offsetY=e.offsetY,i.x=e.x||e.clientX,i.y=e.y||e.clientY,i.detail={},i.detail.pickingInfos=a,i}function u(e){var t=void 0;if(e&&e.detail&&e.detail.pickingInfos){var r=(0,b.take)(1,e.detail.pickingInfos),n=d(r,1),a=n[0];a&&a.object&&(t=(0,x.findSelectionRoot)(a.object))}return t}function l(e,t){var r={width:320,height:240,lens:{fov:45,near:.1,far:2e4},aspect:320/240,up:[0,0,1],pos:[0,0,0]};e=Object.assign({},r,e);var n=new y["default"](e.width,e.height,e.lens.fov,e.lens.near,e.lens.far,e.lens.near,e.lens.far);return n.up.fromArray(e.up),n.position.fromArray(e.pos),n}function c(e){var t=(new p["default"].Vector3).fromArray(e.up),r=new m["default"](void 0,void 0,t);return r.upVector=t,r.userPanSpeed=e.panSpeed,r.userZoomSpeed=e.zoomSpeed,r.userRotateSpeed=e.rotateSpeed,r.autoRotate=e.autoRotate.enabled,r.autoRotateSpeed=e.autoRotate.speed,r}function f(e){var t=void 0,r={color:"#FFF",intensity:1,pos:[0,0,0]};switch(e=Object.assign({},r,e),e.type){case"light":t=new p["default"].Light(e.color),t.intensity=e.intensity;break;case"hemisphereLight":t=new p["default"].HemisphereLight(e.color,e.gndColor,e.intensity);break;case"ambientLight":var n=new p["default"].Color(e.color);n.r*=e.intensity,n.g*=e.intensity,n.b*=e.intensity,t=new p["default"].AmbientLight(n);break;case"directionalLight":var a={castShadow:!1,onlyShadow:!1,shadowMapWidth:2048,shadowMapHeight:2048,shadowCameraLeft:-500,shadowCameraRight:500,shadowCameraTop:500,shadowCameraBottom:-500,shadowCameraNear:1200,shadowCameraFar:5e3,shadowCameraFov:50,shadowBias:1e-4,shadowDarkness:.3,shadowCameraVisible:!1};e=Object.assign({},a,e),t=new p["default"].DirectionalLight(e.color,e.intensity);for(var i in e)t.hasOwnProperty(i)&&(t[i]=e[i]);break;default:throw new Error("could not create light")}return t.position.fromArray(e.pos),t}var d=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(u){a=!0,i=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(t,"__esModule",{value:!0}),t.positionFromCoords=a,t.targetObject=i,t.isTransformTool=o,t.selectionAt=s,t.meshFrom=u,t.makeCamera=l,t.makeControls=c,t.makeLight=f;var h=r(1),p=n(h),v=r(7),m=n(v),g=r(6),y=n(g),b=r(30),x=r(9)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,r){var n=arguments.length<=3||void 0===arguments[3]?4:arguments[3],a=new Uint8Array(t*r*n);return e.readPixels(0,0,t,r,e.RGBA,e.UNSIGNED_BYTE,a),a}function i(e,t,r,n){(0,R["default"])(e,t,r,n)}function o(e,t,r,n){var o=arguments.length<=4||void 0===arguments[4]?"./test.png":arguments[4],s=a(e,t,r,n);i(s,t,r,o)}function s(e,t,r,n){var a=n.width,i=n.height,o=n.devicePixelRatio,s=n.renderToScreen,u={minFilter:b["default"].LinearFilter,magFilter:b["default"].LinearFilter,format:b["default"].RGBAFormat,stencilBuffer:!0},l=new b["default"].Scene,c=new b["default"].Scene,f=(new b["default"].WebGLRenderTarget(a,i,u),new M["default"](e));f.renderTarget1.stencilBuffer=!0,f.renderTarget2.stencilBuffer=!0;var d=new O["default"](r,t),h=new O["default"](l,t),p=new b["default"].MaskPass(c,t);p.inverse=!0;var v=new b["default"].ClearMaskPass,m=new b["default"].ShaderPass(b["default"].CopyShader),g=new b["default"].ShaderPass(b["default"].FXAAShader),y=new b["default"].ShaderPass(b["default"].VignetteShader);g.uniforms.resolution.value.set(1/a*o,1/i*o),y.uniforms.offset.value=.95,y.uniforms.darkness.value=.9,e.autoClear=!1,h.clear=!1,f.addPass(d),f.addPass(p),f.addPass(h),f.addPass(v),f.addPass(m);var x=f.passes[f.passes.length-1];return x.renderToScreen=s,{composers:[f],fxaaPass:g,outScene:l,maskScene:c}}function u(e,t,r,n){e.context.canvas||(e.context.canvas={width:n.width,height:n.height});var a=s(e,t,r,n),i=a.composers;return i}function l(){var e=new Object;return e.addEventListener=function(e,t){},e}function c(){var e=document.createElement("canvas");return e}function f(){return"undefined"!=typeof window?c():l()}function d(e,t,r){t.lookAt(r.position)}function h(e){return e}function p(e,t,r,n){t.forEach(function(e){return e.render()})}function v(e,t,r){return r.scenes.main.map(function(e){return(0,x.makeLight)(e)}).forEach(function(t){return e.add(t)}),e}function m(e,t,r){var n=1,a=new b["default"].WebGLRenderer({antialias:!1,preserveDrawingBuffer:!0,canvas:e,context:t});return a.setClearColor("#fff"),a.setPixelRatio(n),Object.keys(r.renderer).map(function(e){a[e]=r.renderer[e]}),console.log("renderer setup DONE"),a}function g(e){var t=e.mesh,r=e.uri,n=e.resolution,a=w.presets,i={width:n.width,height:n.height,devicePixelRatio:1,renderToScreen:"undefined"!=typeof window};T=h(T);var s=null,l=[],c=new b["default"].Scene,g=new b["default"].Object3D;c.dynamicInjector=g,c.add(g);var y=(0,x.makeCamera)(a.cameras[0],i),_=new L(2e3,2e3,null,a.cameras[0].up),M=new b["default"].ShaderMaterial;M=new b["default"].MeshNormalMaterial({shading:b["default"].SmoothShading}),t.material=M,g.add(t);var j=[y,_],S=f();s=m(S,T,a),c=v(c,j,a),l=u(s,y,c,i),d(s,y,c);var O=g;k(O,y,new b["default"].Vector3),p(s,l,y,c);var P=s.getContext();o(P,i.width,i.height,4,r)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=g;var y=r(1),b=n(y),x=r(21),w=r(19),_=r(13),M=n(_),j=r(17),S=(n(j),r(16)),O=n(S),P=(r(15),r(11)),F=(n(P),r(14)),A=(n(F),r(18)),C=(n(A),r(12)),V=(n(C),r(10)),B=(n(V),r(4)),D=r(25),E=(n(D),r(5)),R=n(E),k=B.objectEffects.zoomToFit,T=r(28)(),L=B.planes.ShadowPlane},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(!(e instanceof u["default"].Object3D)){var t=new u["default"].MeshPhongMaterial({color:1550837,specular:16777215,shininess:5,shading:u["default"].FlatShading});e=new u["default"].Mesh(e,t)}var r=e.geometry;return r&&(r.computeVertexNormals(),r.computeFaceNormals()),r.morphTargets||(r.morphTargets=[]),r.morphNormals||(r.morphNormals=[]),e}function i(e){var t=e.positions,r=e.normals,n=e.indices,a=e.colors,i=new u["default"].BufferGeometry;return i.addAttribute("position",new u["default"].BufferAttribute(t,3)),i.addAttribute("normal",new u["default"].BufferAttribute(r,3)),n&&i.addAttribute("index",new u["default"].BufferAttribute(n,1)),a&&i.addAttribute("color",new u["default"].BufferAttribute(a,1)),i}function o(e){var t=hash.hex();return t}Object.defineProperty(t,"__esModule",{value:!0}),t.postProcessMesh=a,t.geometryFromBuffers=i,t.meshTohash=o;var s=r(1),u=n(s)},function(e,t){"use strict";function r(e){return String(e).replace(/^\s+|\s+$/g,"")}function n(e){return null!==e&&void 0!==e}function a(e){return"string"!=typeof e?!1:!e||/^\s*$/.test(e)||0===e.length||!e.trim()}function i(e,t){return JSON.stringify(e)===JSON.stringify(t)?!0:!1}function o(e){return e?e.constructor!==Array?[e]:e:[]}function s(e){try{return JSON.parse(e)||{}}catch(t){throw new Error("Error parsing data",JSON.stringify(e))}}function u(e){return e.substr((~-e.lastIndexOf(".")>>>0)+2).toLowerCase()}function l(e){var t=e.split("?"),r=t.shift().split("/").pop(),n=u(e);return{name:r,ext:n}}function c(e){return"undefined"!=typeof e&&null!==e&&e instanceof File}function f(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=new Array(36),r=0,n=void 0;return function(){for(var a=0;36>a;a++)8==a||13==a||18==a||23==a?t[a]="-":14==a?t[a]="4":(2>=r&&(r=33554432+16777216*Math.random()|0),n=15&r,r>>=4,t[a]=e[19==a?3&n|8:n]);return t.join("")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.trim=r,t.exists=n,t.isEmpty=a,t.itemsEqual=i,t.toArray=o,t.safeJSONParse=s,t.getExtension=u,t.getNameAndExtension=l,t.isValidFile=c,t.generateUUID=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=r(1),l=n(u),c=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?200:arguments[0],r=arguments.length<=1||void 0===arguments[1]?200:arguments[1],n=arguments.length<=2||void 0===arguments[2]?100:arguments[2],o=arguments.length<=3||void 0===arguments[3]?[0,1,0]:arguments[3],s=arguments.length<=4||void 0===arguments[4]?47871:arguments[4],u=arguments.length<=5||void 0===arguments[5]?.2:arguments[5],c=arguments.length<=6||void 0===arguments[6]?!0:arguments[6],f=arguments.length<=7||void 0===arguments[7]?"#000000":arguments[7],d=arguments.length<=8||void 0===arguments[8]?"center":arguments[8];a(this,t);var h=i(this,Object.getPrototypeOf(t).call(this));h.width=e,h.length=r,h.step=n,h.color=s,h.opacity=u,h.text=c,h.textColor=f,h.textLocation=d,h.upVector=(new l["default"].Vector3).fromArray(o),h.name="grid",h.marginSize=10,h.stepSubDivisions=10,h._drawGrid();var o=h.upVector;return h.up=o,h.lookAt(o),h}return o(t,e),s(t,[{key:"_drawGrid",value:function(){var e,t,r,n,a,i;r=-.05,e=new l["default"].Geometry,t=new l["default"].LineBasicMaterial({color:(new l["default"].Color).setHex(this.color),opacity:this.opacity,linewidth:2,transparent:!0}),i=-.05,n=new l["default"].Geometry,a=new l["default"].LineBasicMaterial({color:(new l["default"].Color).setHex(this.color),opacity:this.opacity/2,transparent:!0});var o=this.step,s=this.stepSubDivisions,u=this.width,c=this.length,f=!0;if(f){for(var d=0;u/2>=d;d+=o/s)n.vertices.push(new l["default"].Vector3(-c/2,d,i)),n.vertices.push(new l["default"].Vector3(c/2,d,i)),n.vertices.push(new l["default"].Vector3(-c/2,-d,i)),n.vertices.push(new l["default"].Vector3(c/2,-d,i)),d%o==0&&(e.vertices.push(new l["default"].Vector3(-c/2,d,r)),e.vertices.push(new l["default"].Vector3(c/2,d,r)),e.vertices.push(new l["default"].Vector3(-c/2,-d,r)),e.vertices.push(new l["default"].Vector3(c/2,-d,r)));for(var d=0;c/2>=d;d+=o/s)n.vertices.push(new l["default"].Vector3(d,-u/2,i)),n.vertices.push(new l["default"].Vector3(d,u/2,i)),n.vertices.push(new l["default"].Vector3(-d,-u/2,i)),n.vertices.push(new l["default"].Vector3(-d,u/2,i)),d%o==0&&(e.vertices.push(new l["default"].Vector3(d,-u/2,r)),e.vertices.push(new l["default"].Vector3(d,u/2,r)),e.vertices.push(new l["default"].Vector3(-d,-u/2,r)),e.vertices.push(new l["default"].Vector3(-d,u/2,r)))}else{for(var d=-u/2;u/2>=d;d+=o/s)n.vertices.push(new l["default"].Vector3(-c/2,d,i)),n.vertices.push(new l["default"].Vector3(c/2,d,i)),d%o==0&&(e.vertices.push(new l["default"].Vector3(-c/2,d,r)),e.vertices.push(new l["default"].Vector3(c/2,d,r)));for(var d=-c/2;c/2>=d;d+=o/s)n.vertices.push(new l["default"].Vector3(d,-u/2,i)),n.vertices.push(new l["default"].Vector3(d,u/2,i)),d%o==0&&(e.vertices.push(new l["default"].Vector3(d,-u/2,r)),e.vertices.push(new l["default"].Vector3(d,u/2,r)))}this.mainGrid=new l["default"].Line(e,t,l["default"].LinePieces),this.subGrid=new l["default"].Line(n,a,l["default"].LinePieces);var h=u+this.marginSize,p=c+this.marginSize,v=new l["default"].Geometry;v.vertices.push(new l["default"].Vector3(-c/2,-u/2,i)),v.vertices.push(new l["default"].Vector3(c/2,-u/2,i)),v.vertices.push(new l["default"].Vector3(c/2,-u/2,i)),v.vertices.push(new l["default"].Vector3(c/2,u/2,i)),v.vertices.push(new l["default"].Vector3(c/2,u/2,i)),v.vertices.push(new l["default"].Vector3(-c/2,u/2,i)),v.vertices.push(new l["default"].Vector3(-c/2,u/2,i)),v.vertices.push(new l["default"].Vector3(-c/2,-u/2,i)),v.vertices.push(new l["default"].Vector3(-p/2,-h/2,i)),v.vertices.push(new l["default"].Vector3(p/2,-h/2,i)),v.vertices.push(new l["default"].Vector3(p/2,-h/2,i)),v.vertices.push(new l["default"].Vector3(p/2,h/2,i)),v.vertices.push(new l["default"].Vector3(p/2,h/2,i)),v.vertices.push(new l["default"].Vector3(-p/2,h/2,i)),v.vertices.push(new l["default"].Vector3(-p/2,h/2,i)),v.vertices.push(new l["default"].Vector3(-p/2,-h/2,i));var m=new l["default"].LineBasicMaterial({color:(new l["default"].Color).setHex(this.color),opacity:2*this.opacity,linewidth:2,transparent:!0});this.margin=new l["default"].Line(v,m,l["default"].LinePieces),this.add(this.mainGrid),this.add(this.subGrid),this.add(this.margin),this._drawNumbering()}},{key:"toggle",value:function(e){this.traverse(function(t){t.visible=e})}},{key:"setOpacity",value:function(e){this.opacity=e,this.mainGrid.material.opacity=e,this.subGrid.material.opacity=e/2,this.margin.material.opacity=2*e}},{key:"setColor",value:function(e){this.color=e,this.mainGrid.material.color=(new l["default"].Color).setHex(this.color),this.subGrid.material.color=(new l["default"].Color).setHex(this.color),this.margin.material.color=(new l["default"].Color).setHex(this.color)}},{key:"toggleText",value:function(e){this.text=e;for(var t=this.labels.children,r=0;r<this.labels.children.length;r++){var n=t[r];n.visible=e}}},{key:"setTextColor",value:function(e){this.textColor=e,this._drawNumbering()}},{key:"setTextLocation",value:function(e){return this.textLocation=e,this._drawNumbering()}},{key:"setUp",value:function(e){this.upVector=e,this.up=e,this.lookAt(e)}},{key:"resize",value:function(e,t){if(e&&t){var e=Math.max(e,10);this.width=e;var t=Math.max(t,10);return this.length=t,this.step=Math.max(this.step,5),this.remove(this.mainGrid),this.remove(this.subGrid),this.remove(this.margin),this._drawGrid()}}},{key:"_drawNumbering",value:function(){var e,t,r=this.step;this._labelStore={},null!=this.labels&&this.mainGrid.remove(this.labels),this.labels=new l["default"].Object3D;var n=this.width,a=this.length,i=this.numbering="centerBased",o=new l["default"].Object3D,s=new l["default"].Object3D;if("centerBased"==i){for(var u=0;n/2>=u;u+=r){var e=this.drawTextOnPlane(""+u,32),t=e.clone();e.position.set(a/2,-u,.1),e.rotation.z=-Math.PI/2,o.add(e),t.position.set(a/2,u,.1),t.rotation.z=-Math.PI/2,o.add(t)}for(var u=0;a/2>=u;u+=r){var e=this.drawTextOnPlane(""+u,32),t=e.clone();e.position.set(-u,n/2,.1),s.add(e),t.position.set(u,n/2,.1),s.add(t)}var c=s.clone();c.rotation.z=-Math.PI;var f=o.clone();f.rotation.z=-Math.PI}this.labels.add(o),this.labels.add(f),this.labels.add(s),this.labels.add(c);var d=this.text;this.labels.traverse(function(e){e.visible=d}),this.mainGrid.add(this.labels)}},{key:"drawTextOnPlane",value:function(e,t){var r,n,a,i,o;null==t&&(t=256),r=document?document.createElement("canvas"):{};var t=128;return r.width=t,r.height=t,n=r.getContext("2d"),n.font="18px sans-serif",n.textAlign="center",n.fillStyle=this.textColor,n.fillText(e,r.width/2,r.height/2),n.strokeStyle=this.textColor,n.strokeText(e,r.width/2,r.height/2),o=new l["default"].Texture(r),o.needsUpdate=!0,o.generateMipmaps=!0,o.magFilter=l["default"].LinearFilter,o.minFilter=l["default"].LinearFilter,a=new l["default"].MeshBasicMaterial({map:o,transparent:!0,color:16777215,alphaTest:.3}),i=new l["default"].Mesh(new l["default"].PlaneBufferGeometry(t/8,t/8),a),i.doubleSided=!0,i.overdraw=!0,i}}]),t}(l["default"].Object3D);t["default"]=c},function(e,t,r){var n,n;r(2);!function(t){e.exports=t()}(function(){return function e(t,r,a){function i(s,u){if(!r[s]){if(!t[s]){var l="function"==typeof n&&n;if(!u&&l)return n(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[s]={exports:{}};t[s][0].call(f.exports,function(e){var r=t[s][1][e];return i(r?r:e)},f,f.exports,e,t,r,a)}return r[s].exports}for(var o="function"==typeof n&&n,s=0;s<a.length;s++)i(a[s]);return i}({1:[function(e,t,r){function n(){c=!1,s.length?l=s.concat(l):f=-1,l.length&&a()}function a(){if(!c){var e=setTimeout(n);c=!0;for(var t=l.length;t;){for(s=l,l=[];++f<t;)s&&s[f].run();f=-1,t=l.length}s=null,c=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function o(){}var s,u=t.exports={},l=[],c=!1,f=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new i(e,t)),1!==l.length||c||setTimeout(a,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=o,u.addListener=o,u.once=o,u.off=o,u.removeListener=o,u.removeAllListeners=o,u.emit=o,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],2:[function(e,t,r){(function(e){(function(){var n="undefined"!=typeof e&&e.versions&&!!e.versions.node,a="undefined"!=typeof window,i="undefined"!=typeof t&&!!t.exports,o=i?r:this.detect={};o.isNode=n,o.isBrowser=a,o.isModule=i}).call(this)}).call(this,e("_process"))},{_process:1}],3:[function(e,t,r){"use strict";t.exports=function(e){var t,r,n,a,i,o,s=arguments.length;for(r=1;s>r;r++)for(t=arguments[r],a=Object.keys(t),n=a.length,o=0;n>o;o++)i=a[o],e[i]=t[i];return e}},{}],4:[function(e,t,r){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r={useWorker:o["default"].isBrowser===!0,offsets:[0]};t=(0,u["default"])({},r,t);var n=t,a=n.useWorker,i=(n.offsets,new c["default"].ReplaySubject(1));return a?!function(){var t=new Worker(window.URL.createObjectURL(new Blob(['(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module \'"+o+"\'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n"use strict";\n\nObject.defineProperty(exports, "__esModule", {\n	value: true\n});\nvar OBJ = function OBJ() {};\n\nOBJ.prototype = {\n	constructor: OBJ\n};\n\nOBJ.prototype.parseIndex = function (index, type) {\n\n	index = parseInt(index);\n	var dataArray = this.currentObject._attributes[type];\n\n	return index >= 0 ? index - 1 : index + dataArray.length;\n};\n\nOBJ.prototype._handle_face_line = function (rawData, rIndices, indices, type) {\n	var data = [];\n\n	var tmpIdx = [];\n	for (var i = 0; i < rIndices.length; i++) {\n		var idx = rIndices[i];\n		//console.log(data[ idx ]);\n		//data.push( parseInt( rawData[ idx] ) );\n		data.push(this.parseIndex(rawData[idx], type));\n	}\n\n	if (isNaN(data[3])) {\n		indices.push(data[0], data[1], data[2]);\n		//indices.push( this.parseIndex( data[ 0 ], type) , this.parseIndex( data[ 1 ], type) , this.parseIndex( data[ 2 ], type) );\n	} else {\n			indices.push(data[0], data[1], data[3], data[1], data[2], data[3]);\n		}\n};\n\nOBJ.prototype._newObject = function () {\n	var currentObject = {};\n	currentObject._attributes = {};\n	currentObject._attributes["position"] = [];\n	currentObject._attributes["normal"] = [];\n	currentObject._attributes["uv"] = [];\n	currentObject._attributes["indices"] = [];\n	currentObject.faceCount = 0;\n	return currentObject;\n};\n\nOBJ.prototype.getData = function (text) {\n	var vertex_pattern = /v( +[\\d|\\.|\\+|\\-|e]+)( +[\\d|\\.|\\+|\\-|e]+)( +[\\d|\\.|\\+|\\-|e]+)/;\n	// vn float float float\n	var normal_pattern = /vn( +[\\d|\\.|\\+|\\-|e]+)( +[\\d|\\.|\\+|\\-|e]+)( +[\\d|\\.|\\+|\\-|e]+)/;\n	// vt float float\n	var uv_pattern = /vt( +[\\d|\\.|\\+|\\-|e]+)( +[\\d|\\.|\\+|\\-|e]+)/;\n	// f vertex vertex vertex ...\n	var face_pattern1 = /f( +\\d+)( +\\d+)( +\\d+)( +\\d+)?/;\n	// f vertex/uv vertex/uv vertex/uv ...\n	var face_pattern2 = /f( +(\\d+)\\/(\\d+))( +(\\d+)\\/(\\d+))( +(\\d+)\\/(\\d+))( +(\\d+)\\/(\\d+))?/;\n	// f vertex/uv/normal vertex/uv/normal vertex/uv/normal ...\n	var face_pattern3 = /f( +(\\d+)\\/(\\d+)\\/(\\d+))( +(\\d+)\\/(\\d+)\\/(\\d+))( +(\\d+)\\/(\\d+)\\/(\\d+))( +(\\d+)\\/(\\d+)\\/(\\d+))?/;\n	// f vertex//normal vertex//normal vertex//normal ...\n	var face_pattern4 = /f( +(\\d+)\\/\\/(\\d+))( +(\\d+)\\/\\/(\\d+))( +(\\d+)\\/\\/(\\d+))( +(\\d+)\\/\\/(\\d+))?/;\n\n	text = text.replace(/\\\\\\r\\n/g, \'\'); // handles line continuations\n	var lines = text.split(\'\\n\');\n\n	var vertices = [];\n	var normals = [];\n	var uvs = [];\n	var indices = [];\n	var normIndices = [];\n	var uvIndices = [];\n\n	var faceCount = 0;\n	var face_offset = 0;\n\n	var defaultNormal = [1, 1, 1];\n	var defaultUv = [0, 0];\n\n	var objects = [];\n	var textures = {};\n	var materials = {};\n\n	var currentObject = this._newObject();\n	this.currentObject = currentObject;\n	var currentMaterial = {};\n\n	vertices = currentObject._attributes["position"];\n	normals = currentObject._attributes["normal"];\n	uvs = currentObject._attributes["uv"];\n	indices = currentObject._attributes["indices"];\n\n	for (var i = 0; i < lines.length; i++) {\n		var line = lines[i];\n		line = line.trim().toLowerCase(); //needed because of some "exponent" values in upper case\n		var result;\n\n		//console.log(line);\n\n		if (line.length === 0 || line.charAt(0) === \'#\') {\n			continue;\n		} else if ((result = vertex_pattern.exec(line)) !== null) {\n			// ["v 1.0 2.0 3.0", "1.0", "2.0", "3.0"]\n			vertices.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\n		} else if ((result = normal_pattern.exec(line)) !== null) {\n			// ["vn 1.0 2.0 3.0", "1.0", "2.0", "3.0"]\n			normals.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\n		} else if ((result = uv_pattern.exec(line)) !== null) {\n			// ["vt 0.1 0.2", "0.1", "0.2"]\n			uvs.push(parseFloat(result[1]), parseFloat(result[2]));\n		} else if ((result = face_pattern1.exec(line)) !== null) {\n			// ["f 1 2 3", "1", "2", "3", undefined]\n			//console.log("result v1");\n			this._handle_face_line(result, [1, 2, 3, 4], indices, "position");\n			//faces, uvs, normals_inds, geometry,face_offset, normals, uvs\n		} else if ((result = face_pattern2.exec(line)) !== null) {\n				// ["f 1/1 2/2 3/3", " 1/1", "1", "1", " 2/2", "2", "2", " 3/3", "3", "3", undefined, undefined, undefined]\n				//console.log("result v2");\n				this._handle_face_line(result, [2, 5, 8, 11], indices, "position"); //2,5,8,11//possible winding order change of for some stuff11,8,5,2\n				this._handle_face_line(result, [3, 6, 9, 12], uvIndices, "uv");\n			} else if ((result = face_pattern3.exec(line)) !== null) {\n				// ["f 1/1/1 2/2/2 3/3/3", " 1/1/1", "1", "1", "1", " 2/2/2", "2", "2", "2", " 3/3/3", "3", "3", "3", undefined, undefined, undefined, undefined]\n				//console.log("result v3");\n				//result[ 2 ], result[ 6 ], result[ 10 ], result[ 14 ]\n				this._handle_face_line(result, [2, 6, 10, 14], indices, "position"); //2,6,10,14\n				this._handle_face_line(result, [4, 8, 12, 16], normIndices, "normal");\n				this._handle_face_line(result, [3, 7, 11, 15], uvIndices, "uv");\n			} else if ((result = face_pattern4.exec(line)) !== null) {\n				//console.log("result v4");\n				// ["f 1//1 2//2 3//3", " 1//1", "1", "1", " 2//2", "2", "2", " 3//3", "3", "3", undefined, undefined, undefined]\n				this._handle_face_line(result, [2, 5, 8, 11], indices, "position");\n				this._handle_face_line(result, [3, 6, 9, 12], normIndices, "normal");\n			} else if (/^o /.test(line)) {\n				// object\n				//console.log("object")\n				if (currentObject) {\n					//if (!(geometry === undefined)) {\n					face_offset = face_offset + vertices.length;\n\n					//console.log("oldobject")\n					//console.log( currentObject)\n					currentObject.faceCount = indices.length;\n\n					//reset all for next object\n					currentObject = this._newObject();\n					currentObject.name = line.substring(2).trim();\n					vertices = currentObject._attributes["position"];\n					normals = currentObject._attributes["normal"];\n					uvs = currentObject._attributes["uv"];\n					indices = currentObject._attributes["indices"];\n					normIndices = currentObject._attributes["normIndices"];\n					uvIndices = currentObject._attributes["uvIndices"];\n\n					objects.push(currentObject);\n				}\n			} else if (/^g /.test(line)) {\n				// group\n				//console.log("group");\n			} else if (/^usemtl /.test(line)) {\n					// material\n					currentMaterial.name = line.substring(7).trim();\n				} else if (/^mtllib /.test(line)) {\n					// mtl file\n					currentMaterial = {};\n				} else if (/^s /.test(line)) {\n					// smooth shading\n				} else {\n						// console.log( "OBJParser: Unhandled line " + line );\n					}\n	}\n\n	if (objects.indexOf(currentObject) == -1) {\n		objects.push(currentObject);\n	}\n	currentObject.faceCount = indices.length / 3;\n\n	return {\n		objects: objects\n	};\n};\n\n/*\n  extracts data based on indices since obj has different indices for normals, uvs etc, while webgl does not\n*/\nOBJ.prototype._unindexData = function (object) {\n	var resultPositions = [];\n	var resultNormals = [];\n	var resultUv = [];\n\n	var vertices = object._attributes["position"];\n	var normals = object._attributes["normal"];\n	var uvs = object._attributes["uv"];\n\n	for (var i = 0; i < object.indices.length; i++) {\n		//resultPositions.push( data. );\n	}\n};\nexports.default = OBJ;\n\n},{}],2:[function(require,module,exports){\n\'use strict\';\n\nvar _obj = require(\'./obj\');\n\nvar _obj2 = _interopRequireDefault(_obj);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nself.onmessage = function (event) {\n\n  var data = event.data;\n  data = data.data;\n\n  var result = new _obj2.default().getData(data);\n\n  self.postMessage({ data: result });\n  self.close();\n};\n\n},{"./obj":1}]},{},[2])'],{type:"text/javascript"})));t.onmessage=function(e){if("data"in e.data){var t=e.data.data;t.objects.forEach(function(e,r){i.onNext({progress:(r+1)/Object.keys(t.objects).length,total:void 0}),i.onNext((0,h.createModelBuffers)(e))}),i.onNext({progress:1,total:void 0}),i.onCompleted()}else"progress"in e.data&&i.onNext({progress:e.data.progress,total:Math.NaN})},t.onerror=function(e){i.onError("filename:"+e.filename+" lineno: "+e.lineno+" error: "+e.message)},t.postMessage({data:e}),i["catch"](function(e){return t.terminate()})}():(e=(new d["default"]).getData(e),e.objects.forEach(function(t,r){i.onNext({progress:(r+1)/Object.keys(e.objects).length,total:void 0}),i.onNext((0,h.createModelBuffers)(t))}),i.onNext({progress:1,total:void 0}),i.onCompleted()),i}Object.defineProperty(r,"__esModule",{value:!0}),r.inputDataType=r.outputs=void 0,r["default"]=a;var i=e("composite-detect"),o=n(i),s=e("fast.js/object/assign"),u=n(s),l="undefined"!=typeof window?window.Rx:"undefined"!=typeof t?t.Rx:null,c=n(l),f=e("./obj"),d=n(f),h=e("./parseHelpers");r.outputs=["geometry"],r.inputDataType="arrayBuffer"}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./obj":5,"./parseHelpers":6,"composite-detect":2,"fast.js/object/assign":3}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){};n.prototype={constructor:n},n.prototype.parseIndex=function(e,t){e=parseInt(e);var r=this.currentObject._attributes[t];return e>=0?e-1:e+r.length},n.prototype._handle_face_line=function(e,t,r,n){for(var a=[],i=0;i<t.length;i++){var o=t[i];a.push(this.parseIndex(e[o],n))}isNaN(a[3])?r.push(a[0],a[1],a[2]):r.push(a[0],a[1],a[3],a[1],a[2],a[3])},n.prototype._newObject=function(){var e={};return e._attributes={},e._attributes.position=[],e._attributes.normal=[],e._attributes.uv=[],e._attributes.indices=[],e.faceCount=0,e},n.prototype.getData=function(e){var t=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,r=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,n=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,a=/f( +\d+)( +\d+)( +\d+)( +\d+)?/,i=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))?/,o=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))?/,s=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))?/;e=e.replace(/\\\r\n/g,"");var u=e.split("\n"),l=[],c=[],f=[],d=[],h=[],p=[],v=0,m=[],g=this._newObject();this.currentObject=g;var y={};l=g._attributes.position,c=g._attributes.normal,f=g._attributes.uv,d=g._attributes.indices;for(var b=0;b<u.length;b++){var x=u[b];x=x.trim().toLowerCase();var w;0!==x.length&&"#"!==x.charAt(0)&&(null!==(w=t.exec(x))?l.push(parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3])):null!==(w=r.exec(x))?c.push(parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3])):null!==(w=n.exec(x))?f.push(parseFloat(w[1]),parseFloat(w[2])):null!==(w=a.exec(x))?this._handle_face_line(w,[1,2,3,4],d,"position"):null!==(w=i.exec(x))?(this._handle_face_line(w,[2,5,8,11],d,"position"),this._handle_face_line(w,[3,6,9,12],p,"uv")):null!==(w=o.exec(x))?(this._handle_face_line(w,[2,6,10,14],d,"position"),this._handle_face_line(w,[4,8,12,16],h,"normal"),this._handle_face_line(w,[3,7,11,15],p,"uv")):null!==(w=s.exec(x))?(this._handle_face_line(w,[2,5,8,11],d,"position"),this._handle_face_line(w,[3,6,9,12],h,"normal")):/^o /.test(x)?g&&(v+=l.length,
g.faceCount=d.length,g=this._newObject(),g.name=x.substring(2).trim(),l=g._attributes.position,c=g._attributes.normal,f=g._attributes.uv,d=g._attributes.indices,h=g._attributes.normIndices,p=g._attributes.uvIndices,m.push(g)):/^g /.test(x)||(/^usemtl /.test(x)?y.name=x.substring(7).trim():/^mtllib /.test(x)?y={}:/^s /.test(x)))}return-1==m.indexOf(g)&&m.push(g),g.faceCount=d.length/3,{objects:m}},n.prototype._unindexData=function(e){for(var t=(e._attributes.position,e._attributes.normal,e._attributes.uv,0);t<e.indices.length;t++);},r["default"]=n},{}],6:[function(e,t,r){"use strict";function n(e){var t=e.faceCount,r=new Float32Array(3*t*3),n=new Float32Array(3*t*3),a=new Uint32Array(3*t);return r.set(e._attributes.position),n.set(e._attributes.normal),a.set(e._attributes.indices),{positions:r,indices:a,normals:n}}Object.defineProperty(r,"__esModule",{value:!0}),r.createModelBuffers=n},{}]},{},[4])(4)})},function(e,t,r){var n,n;r(2);!function(t){e.exports=t()}(function(){return function e(t,r,a){function i(s,u){if(!r[s]){if(!t[s]){var l="function"==typeof n&&n;if(!u&&l)return n(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[s]={exports:{}};t[s][0].call(f.exports,function(e){var r=t[s][1][e];return i(r?r:e)},f,f.exports,e,t,r,a)}return r[s].exports}for(var o="function"==typeof n&&n,s=0;s<a.length;s++)i(a[s]);return i}({1:[function(e,t,r){function n(){c=!1,s.length?l=s.concat(l):f=-1,l.length&&a()}function a(){if(!c){var e=setTimeout(n);c=!0;for(var t=l.length;t;){for(s=l,l=[];++f<t;)s&&s[f].run();f=-1,t=l.length}s=null,c=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function o(){}var s,u=t.exports={},l=[],c=!1,f=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new i(e,t)),1!==l.length||c||setTimeout(a,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=o,u.addListener=o,u.once=o,u.off=o,u.removeListener=o,u.removeAllListeners=o,u.emit=o,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],2:[function(e,t,r){(function(e){(function(){var n="undefined"!=typeof e&&e.versions&&!!e.versions.node,a="undefined"!=typeof window,i="undefined"!=typeof t&&!!t.exports,o=i?r:this.detect={};o.isNode=n,o.isBrowser=a,o.isModule=i}).call(this)}).call(this,e("_process"))},{_process:1}],3:[function(e,t,r){"use strict";t.exports=function(e){var t,r,n,a,i,o,s=arguments.length;for(r=1;s>r;r++)for(t=arguments[r],a=Object.keys(t),n=a.length,o=0;n>o;o++)i=a[o],e[i]=t[i];return e}},{}],4:[function(e,t,r){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r={useWorker:o["default"].isBrowser===!0};t=(0,u["default"])({},r,t);var n=t,a=n.useWorker,i=new c["default"].ReplaySubject(1);if(a)!function(){var t=new Worker((window.URL||window.webkitURL||window.mozURL).createObjectURL(new Blob(['(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module \'"+o+"\'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\'use strict\';\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.parseSteps = parseSteps;\nexports.parseBinary = parseBinary;\nexports.parseASCII = parseASCII;\n\nvar _utils = require(\'./utils\');\n\nfunction parseSteps(data) {\n  data = (0, _utils.ensureBinary)(data);\n  var isBinary = (0, _utils.isDataBinary)(data);\n\n  var result = null;\n  if (isBinary) {\n    result = parseBinary(data);\n  } else {\n    result = parseASCII((0, _utils.ensureString)(data));\n  }\n  return result;\n}\n\nfunction parseBinary(data) {\n  var reader = new DataView(data);\n  var faces = reader.getUint32(80, true);\n  var dataOffset = 84;\n  var faceLength = 12 * 4 + 2;\n  var offset = 0;\n\n  var positions = new Float32Array(faces * 3 * 3);\n  var normals = new Float32Array(faces * 3 * 3);\n\n  for (var face = 0; face < faces; face++) {\n\n    var start = dataOffset + face * faceLength;\n\n    for (var i = 1; i <= 3; i++) {\n\n      var vertexstart = start + i * 12;\n\n      positions[offset] = reader.getFloat32(vertexstart, true);\n      positions[offset + 1] = reader.getFloat32(vertexstart + 4, true);\n      positions[offset + 2] = reader.getFloat32(vertexstart + 8, true);\n\n      normals[offset] = reader.getFloat32(start, true);\n      normals[offset + 1] = reader.getFloat32(start + 4, true);\n      normals[offset + 2] = reader.getFloat32(start + 8, true);\n      offset += 3;\n    }\n  }\n  return { positions: positions, normals: normals };\n}\n\n//ASCII stl parsing\nfunction parseASCII(data) {\n\n  var normal, patternFace, patternNormal, patternVertex, result, text;\n  patternFace = /facet([\\s\\S]*?)endfacet/g;\n\n  var posArray = [];\n  var normArray = [];\n  var indicesArray = [];\n  var faces = 0;\n\n  while ((result = patternFace.exec(data)) !== null) {\n    var length = 0;\n\n    text = result[0];\n    patternNormal = /normal[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\n    while ((result = patternNormal.exec(text)) !== null) {\n      normArray.push(parseFloat(result[1]), parseFloat(result[3]), parseFloat(result[5]));\n      normArray.push(parseFloat(result[1]), parseFloat(result[3]), parseFloat(result[5]));\n      normArray.push(parseFloat(result[1]), parseFloat(result[3]), parseFloat(result[5]));\n    }\n\n    patternVertex = /vertex[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\n    while ((result = patternVertex.exec(text)) !== null) {\n\n      posArray.push(parseFloat(result[1]), parseFloat(result[3]), parseFloat(result[5]));\n      length += 1;\n    }\n    faces += 1;\n  }\n\n  var positions = new Float32Array(faces * 3 * 3);\n  var normals = new Float32Array(faces * 3 * 3);\n\n  positions.set(posArray);\n  normals.set(normArray);\n\n  return { positions: positions, normals: normals };\n}\n\n},{"./utils":2}],2:[function(require,module,exports){\n"use strict";\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.ensureString = ensureString;\nexports.ensureBinary = ensureBinary;\nexports.isDataBinary = isDataBinary;\nfunction ensureString(buf) {\n\n  if (typeof buf !== "string") {\n    var array_buffer = new Uint8Array(buf);\n    var str = \'\';\n    for (var i = 0; i < buf.byteLength; i++) {\n      str += String.fromCharCode(array_buffer[i]); // implicitly assumes little-endian\n    }\n    return str;\n  } else {\n    return buf;\n  }\n}\n\nfunction ensureBinary(buf) {\n\n  if (typeof buf === "string") {\n    var array_buffer = new Uint8Array(buf.length);\n    for (var i = 0; i < buf.length; i++) {\n      array_buffer[i] = buf.charCodeAt(i) & 0xff; // implicitly assumes little-endian\n    }\n    return array_buffer.buffer || array_buffer;\n  } else {\n    return buf;\n  }\n}\n\nfunction isDataBinary(data) {\n  var expect, face_size, n_faces, reader;\n  reader = new DataView(data);\n  face_size = 32 / 8 * 3 + 32 / 8 * 3 * 3 + 16 / 8;\n\n  n_faces = reader.getUint32(80, true);\n  expect = 80 + 32 / 8 + n_faces * face_size;\n  return expect === reader.byteLength;\n}\n\n},{}],3:[function(require,module,exports){\n\'use strict\';\n\nvar _parseHelpers = require(\'./parseHelpers\');\n\nself.onmessage = function (event) {\n  var result = (0, _parseHelpers.parseSteps)(event.data.data);\n\n  var positions = result.positions.buffer;\n  var normals = result.normals.buffer;\n  self.postMessage({ positions: positions, normals: normals }, [positions, normals]);\n  self.close();\n}; //importScripts(\'./stl-utils.js\');\n\n},{"./parseHelpers":1}]},{},[3])'],{type:"text/javascript"})));t.onmessage=function(e){var t=new Float32Array(e.data.positions),r=new Float32Array(e.data.normals),n={positions:t,normals:r};i.onNext({progress:1,total:t.length}),i.onNext(n),i.onCompleted()},t.onerror=function(e){i.onError("filename:"+e.filename+" lineno: "+e.lineno+" error: "+e.message)},t.postMessage({data:e}),i["catch"](function(e){return t.terminate()})}();else try{var s=(0,f.parseSteps)(e);i.onNext({progress:1,total:s.positions.length}),i.onNext(s),i.onCompleted()}catch(l){i.onError(l)}return i}Object.defineProperty(r,"__esModule",{value:!0}),r.outputs=void 0,r["default"]=a;var i=e("composite-detect"),o=n(i),s=e("fast.js/object/assign"),u=n(s),l="undefined"!=typeof window?window.Rx:"undefined"!=typeof t?t.Rx:null,c=n(l),f=e("./parseHelpers");r.outputs=["geometry"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./parseHelpers":5,"composite-detect":2,"fast.js/object/assign":3}],5:[function(e,t,r){"use strict";function n(e){e=(0,o.ensureBinary)(e);var t=(0,o.isDataBinary)(e),r=null;return r=t?a(e):i((0,o.ensureString)(e))}function a(e){for(var t=new DataView(e),r=t.getUint32(80,!0),n=84,a=50,i=0,o=new Float32Array(3*r*3),s=new Float32Array(3*r*3),u=0;r>u;u++)for(var l=n+u*a,c=1;3>=c;c++){var f=l+12*c;o[i]=t.getFloat32(f,!0),o[i+1]=t.getFloat32(f+4,!0),o[i+2]=t.getFloat32(f+8,!0),s[i]=t.getFloat32(l,!0),s[i+1]=t.getFloat32(l+4,!0),s[i+2]=t.getFloat32(l+8,!0),i+=3}return{positions:o,normals:s}}function i(e){var t,r,n,a,i;t=/facet([\s\S]*?)endfacet/g;for(var o=[],s=[],u=0;null!==(a=t.exec(e));){var l=0;for(i=a[0],r=/normal[\s]+([\-+]?[0-9]+\.?[0-9]*([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+/g;null!==(a=r.exec(i));)s.push(parseFloat(a[1]),parseFloat(a[3]),parseFloat(a[5])),s.push(parseFloat(a[1]),parseFloat(a[3]),parseFloat(a[5])),s.push(parseFloat(a[1]),parseFloat(a[3]),parseFloat(a[5]));for(n=/vertex[\s]+([\-+]?[0-9]+\.?[0-9]*([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+/g;null!==(a=n.exec(i));)o.push(parseFloat(a[1]),parseFloat(a[3]),parseFloat(a[5])),l+=1;u+=1}var c=new Float32Array(3*u*3),f=new Float32Array(3*u*3);return c.set(o),f.set(s),{positions:c,normals:f}}Object.defineProperty(r,"__esModule",{value:!0}),r.parseSteps=n,r.parseBinary=a,r.parseASCII=i;var o=e("./utils")},{"./utils":6}],6:[function(e,t,r){"use strict";function n(e){if("string"!=typeof e){for(var t=new Uint8Array(e),r="",n=0;n<e.byteLength;n++)r+=String.fromCharCode(t[n]);return r}return e}function a(e){if("string"==typeof e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer||t}return e}function i(e){var t,r,n,a;return a=new DataView(e),r=50,n=a.getUint32(80,!0),t=84+n*r,t===a.byteLength}Object.defineProperty(r,"__esModule",{value:!0}),r.ensureString=n,r.ensureBinary=a,r.isDataBinary=i},{}]},{},[4])(4)})},function(e,t){e.exports=require("gl")},function(e,t){e.exports=require("pngjs")},function(e,t){e.exports=require("ramda")}]);
//# sourceMappingURL=jam-headless.js.map